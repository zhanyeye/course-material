# Linux 期末复习

## 第一章

考习题上的题目（答案为一句话的排除）

## 第二章

### 各个硬盘和分区的命名方法

Linux系统使用字母和数字的组合来指代硬盘分区，使用一种更加灵活的分区命名方案，该命名方案是基于文件的，文件名的格式为/dev/xxyN

/dev是Linux系统中所有设备文件所在的目录名，这些文件代表了在/dev上所有可能的分区

分区名的前两个字母表示分区所在设备的类型，通常是hd（IDE硬盘）或sd（SCSI硬盘）

后一个字母表示分区所在的设备。例如，/dev/hda（第1个 IDE 硬盘）或/dev/sdb（第2个SCSI硬盘）

最后的数字N代表分区。前4个分区（主分区或扩展分区）用数字1～4表示，逻辑驱动器从5开始。例如，/dev/hda3是第1个IDE 硬盘上的第3个主分区或扩展分区；/dev/sdb6是第2个SCSI硬盘上的第2个逻辑驱动器。

### 经典的分区规划方式

*有一个命令是带有选项要写的（很经典），可以猜一下是哪个*
（1）最简单的分区规划
• swap分区：即交换分区，实现虚拟内存，建议大小是物理内存的1～2倍；
• /boot分区：用来存放与Linux系统启动有关的程序，比如引导装载程序等，最少200MB；
• /分区：建议大小至少在10GB以上。
（2）合理的分区规划
• swap分区：实现虚拟内存，建议大小是物理内存的1～2倍；
• /boot分区：建议大小最少为200MB；
• /分区： Linux系统的根目录，所有的目录都挂在这个目录下面，建议大小最少为1GB；
• /usr分区：用来存放Linux系统中的应用程序，其相关数据较多，建议大小最少为8GB；
• /var分区：用来存放Linux系统中经常变化的数据以及日志文件，建议大小最少为1GB；
• /home分区：存放普通用户的数据，是普通用户的宿主目录，建议大小为剩下的空间。

## 第三章

### 虚拟控制台

Linux系统可以同时接受多个用户同时登录，还允许用户进行多次登录，这是因为Linux系统提供了虚拟控制台的访问方式

在字符界面下，虚拟控制台的选择 [Alt]+F1～F6
如果在图形界面下，[Ctrl+Alt+F2]～[Ctrl+Alt+F6]组合键切换字符虚拟控制台，使用[Ctrl+Alt+F1]可以切换到图形界面

### 关机重启命令

关机
shutdown -h、halt、init 0

重启
shutdown -r、reboot、init 6

### shell使用技巧（选择）

1. 历史记录
history
ctrl+p 上一条
ctrl+n 下一条
ctrl+r 向上搜索

2. 使用上次参数
!$ 上一条命令的最后参数
!! 运行上一条命令
!6 运行第六条命令
!ls 运行ls开头的命令
!-5 运行倒数第五条命令
fc 编辑并运行上一条命令
^boot^root^ 把最后一条命令替换后运行

3. 字符的补充
Tab

4. 命令排列
一次执行多个命令，使用“；”
使用“；”命令时先执行命令1，不管命令1是否出错，接下来就执行命令2
使用“&&”命令时只有当命令1正确运行完毕后，才能执行命令2

5. 命令替换

Shell命令的参数可以由另外一个命令的结果来替代，这种称之为命令替换
命令1 $(命令2)
命令1 `命令2`

### vi

1. 三种模式
命令模式
插入模式
末行模式

2. 模式切换方式
插入模式下按“Esc”键可回到命令模式
末行模式下按“Esc”键可以回到命令模式
命令模式下按冒号键“:”可以进入末行模式
命令模式下按字母键“a”就可以进入插入模式

3. 命令模式下常用命令（复制、黏贴、移动、保存、删除）
4. 末行模式下常用命令（复制、黏贴、移动、保存、删除）

i 从光标当前所在位置之前开始插入
a 从光标当前所在位置之后开始插入
o 在光标所在的行的下面新开一行插入

H 使光标移动到屏幕的顶部
M 使光标移动到屏幕的中间
L 使光标移动到屏幕的底部
Ctrl+b 使光标往上移动一页屏幕
Ctrl+f 使光标往下移动一页屏幕

^ 使光标移到所在行的行首
$ 使光标移到所在行的行尾
G 使光标移动到文件尾（最后一行的第一个非空白字符处）
gg 使光标移动到文件首（第一行第一个非空白字符处）

nG 使光标移动到第n行首，n代表数字
n+ 使光标向下移动n行，n代表数字
n- 使光标向上移动n行，n代表数字
n$ 使光标移动到以当前行算起的第n行尾，n代表数字

x 删除光标所在位置的字符
nX 删除光标所在位置前面n个字符， n代表数字
dd 删除光标所在行
ndd 从光标所在行开始删除n行， n代表数字
d$ 删除光标到行尾的内容（含光标所在处字符）
dG 从光标位置所在行一直删除到文件尾

yy 复制光标所在行
nyy 复制从光标所在行开始的n行，n代表数字
p 将缓冲区内的内容写到光标所在的位置

ZZ 保存退出
ZQ 不保存退出

u 撤销上一个操作。按多次u可以执行多次撤销
U 取消所有操作

ctrl+g 列出当前行行号

J 合并当前行和下一行

/关键字 按 n 会往后查找下一个关键字，而按 N 会往相反的方向查找
?关键字 方向相反

:!command 执行shell命令
:r!command 执行shell命令，并将结果插入
:/str/ 往右移动到有str的地方
:?str? 往左移动到有str的地方
:s/str1/str2/ 将光标所在行第一个字符str1替换为str2
:s/str1/str2/g 将光标所在行所有的字符str1替换为str2
:% s/str1/str2/g 用str2替换文件中所有的str1

:n1,n2w filename 将从n1行开始到n2行结束的内容保存到文件filename中
:nw filename 将第n行内容保存到文件filename中
:r filename 打开另外一个已经存在的文件filename
:e filename 新建名为filename的文件
:f filename 把当前文件改名为filename文件
:/str/w filename 将包含有str的行写到文件filename中

:d 删除当前行
:nd 删除第n行，n代表数字
:n1,n2 d 删除从n1行开始到n2行为止的所有内容
:.,$d 删除从当前行开始到文件末尾是所有内容

:n1,n2 co n3 将从n1行开始到n2行为止的所有内容复制到n3行后面
:n1,n2 m n3 将从n1行开始到n2行为止的所有内容移动到n3行后面

:set number 在文件中的每一行前面列出行号
:set nonumber 取消在文件中的每一行前面列出行号
:set readonly 设置文件为只读状态

## 第四章

普通文件、目录文件符号

普通文件-
目录文件d
块设备文件b
字符设备文件c
管道文件p
软链接文件l
硬链接文件- 可以看到硬链接数>1

常用的目录干嘛的

1. /etc
2. /dev 设备
3. /home 各用户的主目录
4. /root root用户的主目录
5. /bin 常用命令
6. /sbin 管理命令
7. /lib 共享文件和内核模块
8. /tmp 临时文件
9. /mnt 手动挂载的文件
10. /boot 内核和引导文件
11. /opt 第三方程序的安装文件
12. /media 自动挂载的U盘等
13. /var 存在经常变化的数据
14. /etc 配置文件
15. /usr 用户使用的程序和数据
16. /srv 服务要用的资料目录
17. /run 临时文件系统
18. /sys 检测硬件设置，转换为/dev下的设备
19. /proc 虚拟文件系统，提供系统相关信息

常用命令干嘛的，都是基础命令
cd ~zhangsan 到张三的目录
ls 中的大小为文件大小，不是磁盘占用
touch -c若没有就创建 -t 时间 file
cp a ./b/c 如果存在文件夹c，会复制到文件夹c内，如果不存在会改文件名为c并放到b下
mv a b 改文件夹名
wc 统计文件信息 |行数|单词数|字节数|文件名
不允许给目录创建硬链接，且仅在同一文件系统内才能创建
ln 源 目标 硬链接（该inode的所有文件的链接数同步++）
ln -s 源 目标 软链接

符号链接和硬链接的区别，怎么区分（看链接数、看属性、stade？命令）

1. 硬链接 链接数>1
2. ls -ai inode号相同
3. 硬链接文件的权限与源文件是一样的
4. 使用ls -al可以看到软链接的->

## 第五章

只关注命令是干嘛的，要干嘛要哪个命令，命令行选项不需要记住，考选择题

cat -n a 把a加上行号
less 回卷显示文本文件
head -c 100 前100字节
head -100 前100行
sort -r 倒序按行排序
uniq -d file 找到重复的行
uniq -u file 找到不重复的行
cut 从每行中显示指定的字段
    cut -f 1,5 -d: /etc/passwd f代表文件 d代表文件中存在的分隔符
comm 比较排好序的文件，输出 1特有、2特有、公共
diff 比较文件，输出不同之处（不需要排序）
grep str file 从文件中找str
find / -name 123 -ctime -20 找到符合要求的文件（自动递归）最近20天改过
locate 查找文件，在数据库中（相当于定期对所有文件进行了索引）
**uname 显示操作系统相关信息 -r 内核 -m 架构 -a 所有**
hostname 主机名
free 内存和swap
du -s dir 显示目录或文件的磁盘占用（-s只是一个数值）（默认递归计算每一个子文件夹，给一个值）
date 显示时间 -s 设置
hwclock 显示硬件时钟 -w用系统去更新硬件 -s 从硬件更新系统
mesg [y,n]允许谁推送消息到自己的主机
wall xxx 向全部用户发送消息
write user tty0 向某终端的某用户发消息
uptime 系统已运行时间

## 第六章

SHELL编程，大约20行，把书上的例子都看会，需要掌握变量定义、条件、分支语法，语法错扣一半
**等号两边一定要有空格**
**运算符两边一定要有空格**

```sh
$# 参数数量
$* 所有参数内容
$? 命令返回状态
$$ 当前进程号
$! 后台运行的最后一个进程号
$0 当前的进程名字
$var={var2-"default"} 如果定义了就是var2，没定义就是默认
$var={var2+"default"} 如果定义了就是默认，没定义就是不动var2
$var={var2?"default"} 如果定义了就是var2，没定义输出默认并退出
$var={var2="default"} 如果定义了就是var2，没定义把var2设置为默认，然后再设置var为var2

$(ls) 执行命令
${var} 取值

字符串的拼接不需要+号，直接'abc''def'
${#string} 获取长度


#等号两边一定要有空格
#字符串用=或==或！=
test $var = "123" #=不会产生赋值效果，当然用==也行
echo $? # 0表示相等

#数字必须用-xx
test $var \
-eq
-ne
-ge
-le
-gt
-lt
123
echo $?

test cond1 -a cond2 -o cond3 # and or
test -r file -a -s file #file 存在可读 且 不为空

=和== 和 != 用于比较字符串，在[]里=和==是等价的，在(())里一个是赋值，一个是判断
数字只能使用-eq等比较（好像也可以用==和=和！=）
字符串 -z 是否为空 -n 是否不为空

&& 和|| 必须用在[[  ]] 或者直接在外面

echo -e "\n" #开启转义


#/bin/bash
#filename:xxx
A=123
B="1 2 3"
echo $A
echo $B
readonly C=123

echo -n "Please input" #不换行输出
read answer

if [ $answer -eq "lalala" ]
then
echo 123
fi

if [ $answer = "lalala" ]
then
echo 123
elif [ $answer == "lalala" ]
then
echo 123
fi

if [ -z $answer ]
then
echo 123
else
echo 456
fi

case $answer in
"1")
echo 123
echo 123
;;
"2")
echo 123
echo 123
;;
"*")
echo 123
esac

for var in 1 2 3 4
do
    echo 123
done

sum=0
for var in $*
do
    sum= `expr $sum + $var`
done

int=1
while [ $int -le 5 ]
do
    sq=`expr $int \* $int`
    echo $sq
    int=`expr $int + 1`
done

read EXIT
until [ $EXIT = "exit" ]
do
    echo 123
done

echo $(ls)

i=0
while [ $i -le 5 ]
do
    echo 123
done
```

## 第七章

关于用户和组的四个文件和几个命令，文件里的东西每一项是什么含义（书上有表）

### /etc/passwd

1. 用户名
2. 密码 映射到了/etc/shadow
3. 用户标识号
4. 组群标识号
5. 用户名全称
6. 主目录
7. 登录SHELL

权限是根据UID给的，所以改了UID为0就有了root权限

### /etc/shadow

1. 用户名
2. 加密后的密码
3. 最后一次修改密码时间
4. 用户可以更改密码的天数
5. 用户必须更换密码的天数
6. 密码更换前警告的天数
7. 密码过期多少天后禁用该账户
8. 哪一天账户要被禁用
9. 保留

### /etc/group

1. 组群名称
2. 组群密码（用来让某些用户临时拥有组群权限）
3. 组群标识号
4. 组群成员

### /etc/gshadow

1. 组群名称
2. 组群密码
3. 密码管理者
4. 组群成员

### useradd

useradd -u 设置UID
useradd -d 设置主目录
useradd -g 设置组群
useradd -s 设置默认shell

### usermod

usermod -d 修改主目录 -m 自动移动文件夹
usermod -l 修改登录名
usermod -c 修改全称
usermod -f 修改密码到期多少天后禁用
usermod -g 修改组群
usermod -L 锁定密码
usermod -U 解锁密码
usermod -e 01/01/2019 设置账户过期时间
usermod -s 修改默认SHELL

### userdel

userdel sb 删用户不删主目录
userdel -r sb 删用户且删主目录

### groupadd

groupadd gp1 添加组
groupadd -g 指定GID
groupadd -r 创建系统组群

### groupmod

groupmod -g 修改GID
groupmod -n 修改组群名称

### groupdel

groupdel 删除组群

### 修改密码

passwd user1 默认自己
passwd -l user1 锁定密码
passwd -u user1 解锁密码
passwd -d user1 删除密码

### 在组群中添加删除用户

gpasswd -a u1 g1 添加用户
gpasswd -d u1 g1 删除用户
gpasswd g1 设置密码
gpasswd -r g1 删除密码

### 太重要的sudo和su

su - user1 切换到user1，并切换shell
su user1 切换到user1，不切换shell
su - user1 -c “ls/root” 切换到user1，并切换shell，并执行语句
su 默认切换到root

获取root的两种方式su和sudo（需输入当前用户的密码）
su 使用的是root密码，但不会切换到root家目录
sudo 使用的是当前用户的密码，但使用sudo需要root对用户做授权vi /etc/sudoers 查看设置的权限，通过 vi sudo 给普通用户设置root的权限

newgrp gname 切换到新的group的身份
groups uname 查询用户属于哪个组
id uname -u查询用户UID -G 查询GID -g 查询主组ID

## 第八章

从空的磁盘到挂载的所有步骤（不写具体命令）要知道做了哪些操作

1. 分区 fdisk
2. 创建文件系统 mkfs -t xfs /dev/sda6
3. 挂载 mount -o ro /dev/sdb6 /mnt/aaa ro只读挂载 umount /dev/sdb6

### /etc/fstab自动挂载

1. 设备目录或UUID
2. 挂载目录
3. 文件系统类型
4. 挂载选项 ro rw user nouser defaults
5. 转储选项（0表示不备份）
6. 文件系统检查选项（0表示不检查）

第一项在使用UUID时 UUID=XXX 使用卷标时LABEL=XXX
设置卷表 xfs-admin -L xxx /dev/sdb1 或 e2label /dev/sdb1 xxx

## 第九章

### RPM-重要

1. 安装

`rpm -ivh --replacepkgs(已经有还要装) package_name`

升级(没有安装会安装)
`rpm -Uvh package_name`

刷新（没有安装不会安装）
`rpm -Fvh package_name`

2. 删除

`rpm -e paackge_name`

3. 查询

`rpm -q package_name` 查询是否已安装
`rpm -qa` 所有已安装的
`rpm -qi package_name` 查看描述信息
`rpm -ql package_name` 查看包含的文件列表
`rpm -qR package_name` 查看依赖的包
`rpm -qf file_name` 查看这文件属于哪个包

### YUM

不用写具体的配置文件，掌握安装和卸载软件方法

yum search keyword 搜索关键字
yum info packagename 列出软件包详细信息

yum install packagename 安装软件包
yum remove packagename 删除软件包
yum update packagename 升级软件包
yum info installed 显示所有已经安装的软件包信息

### TAR-重要

tar -cvf xx.tar /xxx/xxx 打包
tar -xvf xx.tar 解包

tar -tvf xx.tar 查看
tar -rvf xx.tar /xxx/xxx 把xx添加进去
tar -uvf xx.tar /xxx/xxx 把xx更新进去

z 调用 gzip  xx.tar.gz
j 调用 bzip2  xx.tar.bz2
J 调用 xz xx.tar.xz

## 第十章

读写的权限对文件和文件目录的影响
r：对文件而言，读取文件内容；对目录来说，**浏览目录**
w：对文件而言，**新增、修改**文件内容；对目录来说，**删除、移动目录内文件**
x：对文件而言，执行文件；对目录来来说，**进入目录**

字符模式和数字模式更改权限的方法

### 字符模式

chmod u+x
chmod g=rw,o-rwx
chmod a-rwx

### 数字设定法

chmod 777
chmod -R 777 /ddd/ddd

### 3种特殊的权限及其对文件目录的影响

SUID 对文件：以该可执行文件的属主身份发起执行 对目录：无效
SGID 对文件：以该可执行文件的组群所有者身份发起执行 对目录：创建的新文件的组=该目录的所属组
Sticky 对文件：无影响 对目录：尽管其他用户对该文件夹有写权限（可以删除、移动其中的文件），但是必须由文件属主执行

chmod u+s
chmod g+s
chmod o+t
chmod 7XXX

### 修改用户和组

chown uname filename
chown :gname filename
chown uname:gname filename
chown -R uname:gname /xxx/xxx

## 第十一章

### ps和top可以看到啥

USER  进程所有者的用户名
PID  进程号，可以唯一标识该进程
%CPU  进程自最近一次刷新以来所占用的CPU时间和总时间的百分比
%MEM  进程使用内存的百分比
VSZ  进程使用的虚拟内存大小，以KB为单位
RSS  进程占用的物理内存的总数量，以KB为单位
TTY  进程相关的终端名
STAT  进程状态，R表示运行或准备运行，S表示睡眠状态，I表示空闲；Z表示冻结，D表示不间断睡眠，W表示进程没有驻留页，T表示停止或跟踪
START  进程开始运行时间
TIME  进程使用的总CPU时间
COMMAND  被执行的命令行

序号  列名    含义
a    PID     进程id
b    PPID    父进程id
c    RUSER   Real user name
d    UID     进程所有者的用户id
e    USER    进程所有者的用户名
f    GROUP   进程所有者的组名
g    TTY     启动进程的终端名。不是从终端启动的进程则显示为 ?
h    PR      优先级
i    NI      nice值。负值表示高优先级，正值表示低优先级
j    P       最后使用的CPU，仅在多CPU环境下有意义
k    %CPU    上次更新到现在的CPU时间占用百分比
l    TIME    进程使用的CPU时间总计，单位秒
m    TIME+   进程使用的CPU时间总计，单位1/100秒
n    %MEM    进程使用的物理内存百分比
o    VIRT    进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES
p    SWAP    进程使用的虚拟内存中，被换出的大小，单位kb。
q    RES     进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA
r    CODE    可执行代码占用的物理内存大小，单位kb
s    DATA    可执行代码以外的部分(数据段+栈)占用的物理内存大小，单位kb
t    SHR     共享内存大小，单位kb
u    nFLT    页面错误次数
v    nDRT    最后一次写入到现在，被修改过的页面数。
w    S       进程状态(D=不可中断的睡眠状态,R=运行,S=睡眠,T=跟踪/停止,Z=僵尸进程)
x    COMMAND 命令名/命令行
y    WCHAN   若该进程在睡眠，则显示睡眠中的系统函数名
z    Flags   任务标志，参考 sched.h

杀进程
ps –ef | grep xxx
kill –9 xxx

### crontab 五个时间段搞懂，几号到几号，每几天，只会考时间

/etc/crontab
五个时间段：

```sh
分钟 小时 日 月 星期 用户名 命令
0-60 0-23 1-31 1-12 0-7（0和7都代表星期日）
* 代表所有值
1-4 代表1到4
1,4 代表1和4
/2 表示间隔为2 比如*/2 每2X一次

30 21 * * * root /root/backup.sh
在每天晚上的21:30执行/root/backup.sh文件

45 4 1,10,22 * * root /root/backup.sh
在每月1、10、22日的4:45执行/root/backup.sh文件

20 1 * * 6,0 root /bin/find / -name core -exec rm {} \;
在每星期六、星期日的1:20执行一个find命令，查找相应的文件

0,30 18-23 * * * root /root/backup.sh
在每天18:00～23:00之间每隔30分钟执行/root/backup.sh

0 23 * * 6 root /root/backup.sh
在每星期六的23:00执行/root/backup.sh
```

grub不考

## 第十二章

### 网卡配置文件在哪

/etc/sysconfig/network-scripts/ifcfg-XXX
/etc/resolv.conf
/etc/hosts
/etc/services

ifconfig 网卡名字 192.168.1.1 netmask 255.255.255.0 up
ifconfig 网卡名字 down
ping -c 4 四次共返回四个数据包
ping -s 128 ICMP数据包大小为128byte

配置文件种的动态和静态IP设定方法，分别改哪几个字段，e.g. IP，mask，gateway，dns（考选择）

命令不考

### systemctl 服务的启动啥的（必考）

systemctl start named.service
systemctl status named.service
systemctl stop named.service
systemctl restart named.service
重新加载named服务配置文件。
systemctl reload named.service
设置named服务开机自动启动。
systemctl enable named.service
查询named服务是否开机自动启动。
systemctl is-enabled named.service
停止named服务开机自动启动。
systemctl disable named.service
查看已启动的服务
systemctl list-units --type=service

一个单元的配置文件可以描述系统服务（.service）、挂载点（.mount）、sockets（.sockets）、系统设备（.device）、交换分区（.swap）、文件路径（.path）、启动目标（.target）、由systemd管理的计时器（.timer）等

## 第十三章

sh的几个作用

SSH（Secure Shell，安全Shell）是由IETF的网络工作小组所制定，为建立在应用层和传输层基础上的安全协议。SSH是目前较可靠，专为远程登录会话和其它网络服务提供安全性的协议。利用SSH协议可以有效防止远程管理过程中的信息泄露问题。

/etc/ssh/sshd_config 配置文件中有端口，listen的ip，是否允许root登陆等
systemctl start sshd.service
systemctl enable sshd.service
ssh -l uname ip 或 ssh uname@ip
ssh a@ip ls -al 执行命令

用root账号把本地文件root/a传送到192.168.0.100远程主机下的/root下，并改名为b。
scp /root/a root@192.168.0.100:/root/b

用root账号把本地/ab目录下所有文件传送到192.168.0.100远程主机的/root目录。
scp /ab/* root@192.168.0.100:/root

**用root账号把远程主机192.168.0.100上的文件/root/abc传送到本地主机/root目录下，并改名为a。**
scp root@192.168.0.100:/root/abc /root/a

1. 登录（必考证书）

启动ssh服务器
systemctl start sshd
开机自动启动ssh服务器
systemctl enable sshd

生成证书：ssh-keygen -t rsa
上传公钥：ssh-copy-id -i id_rsa.pub uname@ip 或者自己上传改名为/$user/.ssh/authorized_keys

1. 拷贝（必考scp命令）

scp /ab/* root@192.168.0.100:/root

### VNC干嘛的，启动、关闭等的命令

虚拟网络计算，种由AT&T开发的远程控制软件，可以运行于局域网和Internet，将远端的图形桌面，显示到本地终端
启动：systemctl start vncserver@:1.service
启动：systemctl enable vncserver@:1.service
firewall-cmd --permanent --add-service vnc-server

查看进程：ps-ef | grep Xvnc
查看端口：netstat -antu|grep 5901
创建或更改密码：vncpasswd
列出当前用户的vnc虚拟桌面：vncserver -list
杀死号码为1的vnc虚拟桌面：vncserver -kill :1
启动号码为5的vnc虚拟桌面：vncserver :5
连接到VNC服务器：vncviewer 192.168.0.2:1

## 网络文件系统

### NFS

NFS是一个文件系统，而RPC是负责信息的传输。这样NFS服务器端与NFS客户端才能由RPC协议来进行端口的对应。NFS主要管理分享出来的目录，而至于文件的传递，就直接将它交给RPC协议来运作。

### NFS server启动等命令

启动nfs-server服务  systemctl start nfs-server.service
查看nfs-server服务运行状态 systemctl status nfs-server.service
停止nfs-server服务  systemctl stop nfs-server.service
重新启动nfs-server服务  systemctl restart nfs-server.service
开机自动启动nfs-server服务  systemctl enable nfs-server.service

显示NFS服务器上的共享目录以及导出选项信息: exportfs -v
重新导出NFS服务器上所有的共享目录 exportfs -rv
不导出NFS服务器上所有的共享目录 exportfs -au
不导出NFS服务器上指定的共享目录/it  exportfs -u 192.168.0.5:/it
将/it目录导出共享给192.168.0.5主机，允许其匿名写入。 exportfs -o async,rw 192.168.0.5:/it
查看NFS服务器192.168.0.2上共享目录的信息。 showmount–e 192.168.0.2

`mount -t nfs [NFS服务器IP地址或者主机名:NFS共享目录] [本地挂载目录]`
在/etc/fstab文件中添加以下一行内容：
192.168.0.100:/it /mnt/it nfs defaults 0 0

### 主要实现什么功能

通过配置NFS服务器,可以让客户机挂载NFS服务器上的共享目录、文件就如同位于客户机的本地硬盘上一样。

### 配置文件里面一行都是什么意思（目录-地址-...）

/etc/exports

/folder 192.168.0.*(rw,sync)

1. 共享目录  必须使用绝对路径，该目录必须事先创建好
2. 客户端  可以访问NFS服务器共享目录的客户端计算机，可以是一台计算机，也可以是一个网段，甚至是一个域。
3. 导出选项

导出选项：
rw
ro
sync 所有数据在请求时写入共享，在请求所做的改变被写入磁盘之前就不会处理其它请求，适合大量写请求的情况
async NFS在写入数据前可以响应请求，写入和读取可同时进行，由NFS保证其一致性。适合少量写请求并且对数据一致性要求不高的情况下
all_squash anonuid=6553 anongid=65534 映射成匿名

## 逻辑卷（必考一题）

### LVM

Logical Volume Manager逻辑卷管理
Linux环境下对磁盘分区进行管理的一种机制，屏蔽了底层磁盘布局，便于动态调整磁盘容量。
/boot分区用于存放引导文件，不能应用LVM机制

### PV

Physical Volume，物理卷
整个**硬盘**，或使用fdisk等工具建立的**普通分区**
包括许多默认4MB大小的**PE**（Physical Extent，基本单元）

### VG

Volume Group，卷组
一个或多个物理卷组合而成的整体

### LV

Logical Volume，逻辑卷
从卷组中分割出的一块空间，用于建立文件系统

### 三个create 命令

1. 新建空分区 fdisk
2. 初始化分区（创建PV） pvcreate /dev/sdb1
3. 创建卷组 vgcreate -s 4MB gname /dev/sdb1 /dev/sdb2
4. 创建逻辑卷 lvcreate -L 1GB -n lvname gname
5. 格式化逻辑卷 mkfs -t xfs /dev/mapper/lvnameXXX
6. 扩大逻辑卷 lvextend -L 1GB /dev/mapper/lvnameXXX
7. 扩大文件系统 resize2fs -p /dev/mapper/lvnameXXX
8. 缩小文件系统 resize2fs -p /dev/mapper/lvnameXXX
9. 缩小逻辑卷 lvreduce -L 1GB /dev/mapper/lvnameXXX

## SELinux

SELinux(Security-Enhanced Linux) 是美国国家安全局（NSA）对于强制访问控制的实现，是Linux上最杰出的新安全子系统。
NSA是在Linux社区的帮助下开发了一种访问控制体系，在这种访问控制体系的限制下，**进程只能访问那些在其任务中所需要文件**。
SELinux是一组**可确定哪个进程能访问文件、目录、端口等的安全规则**。
SELinux标签有若干上下文，最关注类型上下文。
SELinux的目标是**保护用户数据免受已泄露的系统服务的威胁**。

### 配置文件

/etc/sysconfig/selinux
SELINUX=enforcing  enforcing|disabled|permissive
SELINUXTYPE=targeted targeted 与 strict

查看当前SELinux模式：getenforce
修改当前SELinux模式：setenforce 0 （许可） 1 （强制）

修改文件的SELinux上下文： chcon -t type_name file_name
显示布尔值：getsebool -a
修改布尔值：setsebool -P 类型 on|off

### 三个模式

1. 禁用模式：Disabled SELinux没有实际运行
2. 许可模式：Permissive SELinux正在运行，但不会限制domain/type之间的验证关系，即使不正确，仍然可以进行操作，但是会发出警告
3. 强制模式：Enforcing SELinux正在运行，限制domain/type之间的验证关系
